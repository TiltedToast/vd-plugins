(function(c,o,u,t,w,m,f,y){"use strict";const{getChannel:S}=o.findByStoreName("ChannelStore"),a="https://media.discordapp.net/stickers/{stickerId}.{extension}?size=160";function h(e,n){if(!e.guild_id)return!0;const i=S(n).guild_id;return e.guild_id==i}function p(e,n){return e.replace("{stickerId}",n.id).replace("{extension}","png")}const{FormInput:R,FormRow:v,FormSection:g,FormSwitchRow:b,FormText:U}=f.Forms,{ScrollView:L}=f.General;function A(){return m.useProxy(t.storage),React.createElement(L,null,React.createElement(g,{title:"Sticker URL",titleStyleType:"no_border"},React.createElement(R,{placeholder:a,value:t.storage.stickerURL,onChange:function(e){t.storage.stickerURL=e==""?a:e}}),React.createElement(U,{style:{paddingHorizontal:14}},["URL to use for stickers.","{stickerId} will be replaced with sticker ID","{extension} will be replaced with extension (currently always 'png')"].join(`
`))),React.createElement(g,{title:"Misc"},React.createElement(b,{label:"Show warning dialog for APNG stickers",subLabel:"This will only appear once",value:!t.storage.acknowledgedApng,onValueChange:function(e){t.storage.acknowledgedApng=!e}}),React.createElement(v,{label:"Restore default configuration",onPress:function(){t.storage.stickerURL=a,t.storage.acknowledgedApng=!1,y.showToast("Restored default configuration.")}})))}const E=o.findByProps("canUseStickersEverywhere"),s=o.findByProps("sendMessage","receiveMessage"),{getStickerById:P}=o.findByStoreName("StickersStore"),d=[];var x={onLoad:function(){t.storage.stickerURL??=a,d.push(u.instead("canUseStickersEverywhere",E,function(){return!0}));const e=s.sendStickers;d.push(u.instead("sendStickers",s,function(n){const i=n[0],l=n[1].map(function(r){return P(r)}).filter(function(r){return!h(r,i)});if(!l.length)return e(...n);const k=function(r){r&&(t.storage.acknowledgedApng=!0);const C=l.map(function(F){return p(t.storage.stickerURL,F)}).join(`
`);s.sendMessage(i,{content:C})};l.find(function(r){return r.format_type==2})&&!t.storage.acknowledgedApng?w.showConfirmationAlert({title:"APNG Stickers",content:"APNG stickers are not supported by FreeStickers and will be non-animated in chat. Do you want to send them anyway?",confirmText:"Send anyway",cancelText:"Cancel",onConfirm:function(){k(!0)}}):k()}))},onUnload:function(){d.forEach(function(e){return e?.()})},settings:A};return c.default=x,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.metro,vendetta.patcher,vendetta.plugin,vendetta.ui.alerts,vendetta.storage,vendetta.ui.components,vendetta.ui.toasts);

(function(S,i,a,h,u,_,A){"use strict";function L(e,c,r){return`https://discord.com/channels/${e??"@me"}/${c}/${r}`}function b(e){return L(e.guild_id,e.id,e.id)}const{hideActionSheet:k}=i.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:v}=i.findByProps("ActionSheetRow"),E=i.findByName("ForumPostLongPressActionSheet",!1),T=u.getAssetIDByName("ic_copy_message_link"),D=u.getAssetIDByName("toast_copy_link");var U=h.after("default",E,function(e,c){let[{thread:r}]=e;const t=A.findInReactTree(c,function(d){var f,s;return(d==null||(s=d[0])===null||s===void 0||(f=s.type)===null||f===void 0?void 0:f.name)==="ActionSheetRowGroup"});if(!t)return;const l=b(r);t.unshift(React.createElement(v.Group,{key:"jumptovd"},React.createElement(v,{label:"Jump To Starter Message",icon:React.createElement(v.Icon,{source:T}),onPress:function(){a.url.openDeeplink(l)},onLongPress:function(){a.clipboard.setString(l),_.showToast("Copied starter message URL",D),k()}})))});const P=i.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:B}=i.findByProps("ActionSheetRow"),m=u.getAssetIDByName("ic_copy_message_link"),N=u.getAssetIDByName("toast_copy_link");var M=h.before("openLazy",P,function(e){let[c,r,t]=e;r!="MessageLongPressActionSheet"||!t?.message||c.then(function(l){const d=h.after("default",l,function(f,s){var R;React.useEffect(function(){return function(){d()}},[]);const p=A.findInReactTree(s,function(o){var n;return o==null||(n=o.find)===null||n===void 0?void 0:n.call(o,function(w){var y;return(w==null||(y=w.props)===null||y===void 0?void 0:y.iconSource)==m})}),g=t==null||(R=t.message)===null||R===void 0?void 0:R.messageReference;if(!g?.message_id||!p?.length)return;const C=Math.max(p.findIndex(function(o){var n;return(o==null||(n=o.props)===null||n===void 0?void 0:n.iconSource)===m}),p.length-1),I=L(g.guild_id,g.channel_id,g.message_id);p.splice(C,0,React.createElement(B,{label:"Jump To Reference",icon:React.createElement(B.Icon,{source:m}),onLongPress:function(){a.clipboard.setString(I),_.showToast("Copied referenced message URL",N),P.hideActionSheet()},onPress:function(){a.url.openDeeplink(I)}}))})})});const $=[U,M],z=function(){return $.forEach(function(e){return e?.()})};return S.onUnload=z,S})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.ui.toasts,vendetta.utils);

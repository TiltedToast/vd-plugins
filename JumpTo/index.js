(function(h,n,i,d,r,m,R){"use strict";function y(e,t,o){return`https://discord.com/channels/${e??"@me"}/${t}/${o}`}function L(e){return y(e.guild_id,e.id,e.id)}const{hideActionSheet:P}=n.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:f}=n.findByProps("ActionSheetRow"),v=n.findByName("ForumPostLongPressActionSheet",!1),B=r.getAssetIDByName("ic_copy_message_link"),I=r.getAssetIDByName("toast_copy_link");var k=d.after("default",v,function(e,t){let[{thread:o}]=e;const c=R.findInReactTree(t,function(p){return p?.[0]?.type?.name==="ActionSheetRowGroup"});if(!c)return;const s=L(o);c.unshift(React.createElement(f.Group,{key:"jumptovd"},React.createElement(f,{label:"Jump To Starter Message",icon:React.createElement(f.Icon,{source:B}),onPress:function(){i.url.openDeeplink(s)},onLongPress:function(){i.clipboard.setString(s),m.showToast("Copied starter message URL",I),P()}})))});const S=n.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:A}=n.findByProps("ActionSheetRow"),l=r.getAssetIDByName("ic_copy_message_link"),b=r.getAssetIDByName("toast_copy_link");var w=d.before("openLazy",S,function(e){let[t,o,c]=e;o!="MessageLongPressActionSheet"||!c?.message||t.then(function(s){const p=d.after("default",s,function(M,T){React.useEffect(function(){return function(){p()}},[]);const a=R.findInReactTree(T,function(g){return g?.find?.(function(N){return N?.props?.iconSource==l})}),u=c?.message?.messageReference;if(!u?.message_id||!a?.length)return;const U=Math.max(a.findIndex(function(g){return g?.props?.iconSource===l}),a.length-1),_=y(u.guild_id,u.channel_id,u.message_id);a.splice(U,0,React.createElement(A,{label:"Jump To Reference",icon:React.createElement(A.Icon,{source:l}),onLongPress:function(){i.clipboard.setString(_),m.showToast("Copied referenced message URL",b),S.hideActionSheet()},onPress:function(){i.url.openDeeplink(_)}}))})})});const E=[k,w],D=function(){return E.forEach(function(e){return e?.()})};return h.onUnload=D,h})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.ui.toasts,vendetta.utils);

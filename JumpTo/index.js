(function(y,c,a,l,n,S,u){"use strict";function A(e,i,r){return`https://discord.com/channels/${e??"@me"}/${i}/${r}`}function P(e){return A(e.guild_id,e.id,e.id)}const{hideActionSheet:k}=c.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:p}=c.findByProps("ActionSheetRow"),v=c.findByName("ForumPostLongPressActionSheet",!1),w=n.getAssetIDByName("LinkIcon")??n.getAssetIDByName("ic_copy_message_link"),D=n.getAssetIDByName("toast_copy_link");var T=l.after("default",v,function(e,i){let[{thread:r}]=e;const s=u.findInReactTree(i,function(g){return g?.[0]?.type?.name==="ActionSheetRowGroup"});if(!s)return;const f=P(r);s.unshift(React.createElement(p.Group,{key:"jumptovd"},React.createElement(p,{label:"Jump To Starter Message",icon:React.createElement(p.Icon,{source:w}),onPress:function(){a.url.openDeeplink(f)},onLongPress:function(){a.clipboard.setString(f),S.showToast("Copied starter message URL",D),k()}})))});const I=c.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:L}=c.findByProps("ActionSheetRow"),h=n.getAssetIDByName("LinkIcon")??n.getAssetIDByName("ic_copy_message_link"),b=n.getAssetIDByName("toast_copy_link");var E=l.before("openLazy",I,function(e){let[i,r,s]=e;r!="MessageLongPressActionSheet"||!s?.message||i.then(function(f){const g=l.after("default",f,function(z,_){React.useEffect(function(){return function(){g()}},[]);const d=s?.message?.messageReference;if(!d?.message_id)return;let t=u.findInReactTree(_,function(o){return o?.some?.(function(m){return m?.props?.iconSource==h})});if(!t?.length){const o=u.findInReactTree(_,function(R){return R?.[0]?.type?.name==="ActionSheetRowGroup"}),m=Math.min(1,o.length-1);t=u.findInReactTree(o[m],function(R){return R?.some?.(function($){return $?.type?.name==="ActionSheetRow"})})}if(!t?.length)return;const U=Math.max(t.findIndex(function(o){return o?.props?.iconSource===h}),t.length-1),B=A(d.guild_id,d.channel_id,d.message_id);t.splice(U,0,React.createElement(L,{label:"Jump To Reference",icon:React.createElement(L.Icon,{source:h}),onLongPress:function(){a.clipboard.setString(B),S.showToast("Copied referenced message URL",b),I.hideActionSheet()},onPress:function(){a.url.openDeeplink(B)}}))})})});const N=[T,E],M=function(){return N.forEach(function(e){return e?.()})};return y.onUnload=M,y})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.ui.toasts,vendetta.utils);

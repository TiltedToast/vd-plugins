(function(R,n,y,d,t,S,a){"use strict";const{openUrl:A}=n.findByProps("openUrl");function L(e){A?A(e):e?.openURL?.(e)}function I(e,i,r){return`https://discord.com/channels/${e??"@me"}/${i}/${r}`}function v(e){return I(e.guild_id,e.id,e.id)}const{hideActionSheet:w}=n.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:l}=n.findByProps("ActionSheetRow"),T=n.findByName("ForumPostLongPressActionSheet",!1),b=t.getAssetIDByName("LinkIcon")??t.getAssetIDByName("ic_copy_message_link"),k=t.getAssetIDByName("toast_copy_link");var E=d.after("default",T,function(e,i){let[{thread:r}]=e;const s=a.findInReactTree(i,function(g){return g?.[0]?.type?.name==="ActionSheetRowGroup"});if(!s)return;const u=v(r);s.unshift(React.createElement(l.Group,{key:"jumptovd"},React.createElement(l,{label:"Jump To Starter Message",icon:React.createElement(l.Icon,{source:b}),onPress:function(){L(u)},onLongPress:function(){y.clipboard.setString(u),S.showToast("Copied starter message URL",k),w()}})))});const _=n.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:B}=n.findByProps("ActionSheetRow"),p=t.getAssetIDByName("LinkIcon")??t.getAssetIDByName("ic_copy_message_link"),N=t.getAssetIDByName("toast_copy_link");var D=d.before("openLazy",_,function(e){let[i,r,s]=e;r!="MessageLongPressActionSheet"||!s?.message||i.then(function(u){const g=d.after("default",u,function(x,P){React.useEffect(function(){return function(){g()}},[]);const f=s?.message?.messageReference;if(!f?.message_id)return;let o=a.findInReactTree(P,function(c){return c?.some?.(function(h){return h?.props?.iconSource==p})});if(!o?.length){const c=a.findInReactTree(P,function(m){return m?.[0]?.type?.name==="ActionSheetRowGroup"}),h=Math.min(1,c.length-1);o=a.findInReactTree(c[h],function(m){return m?.some?.(function($){return $?.type?.name==="ActionSheetRow"})})}if(!o?.length)return;const G=Math.max(o.findIndex(function(c){return c?.props?.iconSource===p}),o.length-1),U=I(f.guild_id,f.channel_id,f.message_id);o.splice(G,0,React.createElement(B,{label:"Jump To Reference",icon:React.createElement(B.Icon,{source:p}),onLongPress:function(){y.clipboard.setString(U),S.showToast("Copied referenced message URL",N),_.hideActionSheet()},onPress:function(){L(U)}}))})})});const M=[E,D],z=function(){return M.forEach(function(e){return e?.()})};return R.onUnload=z,R})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.ui.toasts,vendetta.utils);

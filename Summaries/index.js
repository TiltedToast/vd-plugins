(function(o,s,t,i,h,m,f){"use strict";const{Stack:S,TableRowGroup:p,TextInput:y}=t.findByProps("Stack","TableRowGroup"),{ScrollView:$}=f.General;i.storage.guildWhitelist??="";function B(){return m.useProxy(i.storage),React.createElement($,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(S,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(p,{title:"Server whitelist"},React.createElement(y,{value:i.storage.guildWhitelist,onChange:function(e){return i.storage.guildWhitelist=e}}))))}const v=t.findByStoreName("ChannelStore"),w=t.findByStoreName("GuildStore"),C=t.findByStoreName("SelectedChannelStore"),{allSummaries:E}=t.findByProps("allSummaries"),{sendBotMessage:G}=t.findByProps("sendBotMessage"),r=(i.storage.guildWhitelist??"").split(","),l=[],u=[];function g(){const e=C.getChannelId();l.includes(e)||(s.logger.log(`Adding selected channel ${e} to whitelist`),l.push(e)),s.logger.log(`Whitelisted guilds: ${r.join(", ")}`),Object.entries(E()).forEach(function(n){let[d,P]=n;P.forEach(function(a){if(u.includes(a.id))return;u.push(a.id),s.logger.log("Found new summary: ",a);const c=v.getChannel(d);(r.includes(c.guild_id)||l.includes(c.id))&&I(c,a)})})}function I(e,n){const d=w.getGuild(e.guild_id);h.showToast(`${d.name} > #${e.name}: ${n.topic}`),G(e.id,[`## ${n.topic}`,n.summShort,`### [Jump to beginning](https://discord.com/channels/${e.guild_id}/${e.id}/${n.startId})`,"","-# Automated message by Summaries plugin"].join(`
`))}const R=setInterval(function(){g()},6e4);g();const b=function(){return clearInterval(R)},W=B;return o.settings=W,o.unpatch=b,o})({},vendetta,vendetta.metro,vendetta.plugin,vendetta.ui.toasts,vendetta.storage,vendetta.ui.components);

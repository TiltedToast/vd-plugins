"use strict";(()=>{var Co=Object.defineProperty;var s=(e,t)=>()=>(e&&(t=e(e=0)),t);var S=(e,t)=>{for(var n in t)Co(e,n,{get:t[n],enumerable:!0})};var oe,pe,ge,Ge,J,he,Z=s(()=>{"use strict";oe=window.nativeModuleProxy,pe=oe.MMKVManager;ge=oe.DCDFileManager??oe.RTNFileManager;Ge=oe.InfoDictionaryManager??oe.RTNClientInfoManager;J=oe.DCDDeviceManager??oe.RTNDeviceManager,he=oe.BundleUpdaterManager});var Et={};S(Et,{find:()=>ae,findAll:()=>He,findByDisplayName:()=>Rt,findByDisplayNameAll:()=>Bo,findByName:()=>N,findByNameAll:()=>Po,findByProps:()=>f,findByPropsAll:()=>Do,findByStoreName:()=>Ie,findByTypeName:()=>Mo,findByTypeNameAll:()=>Lo,modules:()=>yt});var Io,Ln,On,yt,ae,He,Fn,kn,Vn,Un,No,f,Do,N,Po,Rt,Bo,Mo,Lo,Ie,_=s(()=>{"use strict";Io=window.ErrorUtils.getGlobalHandler(),Ln=function(e){return Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})};for(let e in window.modules){let t=Number(e),n=window.modules[t]?.publicModule?.exports;if(!n||n===window||n.proxygone===null){Ln(t);continue}}On=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function(n){let r=[];for(let o in e){let i=Number(o),a=e[i]?.publicModule?.exports;if(!e[i].isInitialized)try{window.ErrorUtils.setGlobalHandler(function(){}),__r(i),window.ErrorUtils.setGlobalHandler(Io)}catch{}if(!a){Ln(i);continue}if(a.default&&a.__esModule&&n(a.default)){if(t)return a.default;r.push(a.default)}if(n(a)){if(t)return a;r.push(a)}}if(!t)return r}},yt=window.modules,ae=On(yt,!0),He=On(yt),Fn=function(e){return function(t){return e.every(function(n){return t[n]!==void 0})}},kn=function(e,t){return t?function(n){return n?.name===e}:function(n){return n?.default?.name===e}},Vn=function(e,t){return t?function(n){return n?.displayName===e}:function(n){return n?.default?.displayName===e}},Un=function(e,t){return t?function(n){return n?.type?.name===e}:function(n){return n?.default?.type?.name===e}},No=function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ae(Fn(t))},Do=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return He(Fn(t))},N=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ae(kn(e,t))},Po=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return He(kn(e,t))},Rt=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ae(Vn(e,t))},Bo=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return He(Vn(e,t))},Mo=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ae(Un(e,t))},Lo=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return He(Un(e,t))},Ie=function(e){return ae(No(e))}});function q(e,t){return ot(e,t,{walkable:["props","children","child","sibling"]})}var Gn=s(()=>{"use strict";ie()});function _t(e,t,n,r){if(!(r>n.maxDepth)&&e){try{if(t(e))return e}catch{}if(Array.isArray(e)){for(let o of e)if(!(typeof o!="object"||o===null))try{let i=_t(o,t,n,r+1);if(i)return i}catch{}}else if(typeof e=="object"){for(let o of Object.keys(e))if(!(typeof e[o]!="object"||e[o]===null)&&!(n.walkable.length&&!n.walkable.includes(o))&&!n.ignore.includes(o))try{let i=_t(e[o],t,n,r+1);if(i)return i}catch{}}}}function ot(e,t){let{walkable:n=[],ignore:r=[],maxDepth:o=100}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _t(e,t,{walkable:n,ignore:r,maxDepth:o},0)}var Hn=s(()=>{"use strict"});async function se(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e4,r=await fetch(e,{signal:Oo(n),...t});if(!r.ok)throw new Error("Request returned non-ok");return r}function Oo(e){let t=new AbortController;return setTimeout(function(){return t.abort(`Timed out after ${e}ms`)},e),t.signal}var $n=s(()=>{"use strict"});function xt(e){return Object.isFrozen(e)?Object.assign({},e):e}var jn=s(()=>{"use strict"});function U(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let o={...e};return n.forEach(function(i){return delete o[i]}),o}var Kn=s(()=>{"use strict"});var wt={};S(wt,{findInReactTree:()=>q,findInTree:()=>ot,safeFetch:()=>se,unfreeze:()=>xt,without:()=>U});var ie=s(()=>{"use strict";Gn();Hn();$n();jn();Kn()});var bt,W,at=s(()=>{bt=["a","b","i"],W=new Map});function Wn(e,t,n,r,o){let i=W.get(t)?.[e];if(!i)return o?Reflect.construct(t[e],n,r):t[e].apply(r,n);for(let u of i.b.values()){let d=u.call(r,n);Array.isArray(d)&&(n=d)}let a=[...i.i.values()].reduce(function(u,d){return function(){for(var g=arguments.length,P=new Array(g),O=0;O<g;O++)P[O]=arguments[O];return d.call(r,P,u)}},function(){for(var u=arguments.length,d=new Array(u),g=0;g<u;g++)d[g]=arguments[g];return o?Reflect.construct(i.o,d,r):i.o.apply(r,d)})(...n);for(let u of i.a.values())a=u.call(r,n,a)??a;return a}var zn=s(()=>{at()});function St(e,t,n,r){let o=W.get(e),i=o?.[t];return i?.[r].has(n)?(i[r].delete(n),bt.every(function(a){return i[a].size===0})&&(Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0})||(e[t]=i.o),delete o[t]),Object.keys(o).length==0&&W.delete(e),!0):!1}function Yn(){for(let[e,t]of W.entries())for(let n in t)for(let r of bt)for(let o of t[n]?.[r].keys()??[])St(e,n,o,r)}var vt=s(()=>{at()});function it(e){return function(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof n[t]!="function")throw new Error(`${t} is not a function in ${n.constructor.name}`);W.has(n)||W.set(n,{});let i=W.get(n);if(!i[t]){let d=n[t];i[t]={o:d,b:new Map,i:new Map,a:new Map};let g=function(re,V,de){let Ao=Wn(t,n,V,re,de);return o&&u(),Ao},P=new Proxy(d,{apply:function(re,V,de){return g(V,de,!1)},construct:function(re,V){return g(d,V,!0)},get:function(re,V,de){return V=="toString"?d.toString.bind(d):Reflect.get(re,V,de)}});Reflect.defineProperty(n,t,{value:P,configurable:!0,writable:!0})||(n[t]=P)}let a=Symbol(),u=function(){return St(n,t,a,e)};return i[t][e].set(a,r),u}}var Xn=s(()=>{zn();at();vt()});var Tt={};S(Tt,{after:()=>R,before:()=>Fo,instead:()=>ye,unpatchAll:()=>Yn});var Fo,ye,R,st=s(()=>{Xn();vt();Fo=it("b"),ye=it("i"),R=it("a")});var Jn,z=s(()=>{"use strict";st();st();Jn={...Tt}});function Ct(){return{listeners:Object.values(At).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var n=this;let r=function(o,i){n.off(o,r),t(o,i)};this.on(e,r)},emit(e,t){for(let n of this.listeners[e])n(e,t)}}}var At,Zn=s(()=>{"use strict";(function(e){e.GET="GET",e.SET="SET",e.DEL="DEL"})(At||(At={}))});var ce,$e,qn=s(()=>{"use strict";h();Z();ce=function(e){return{get:async function(){return JSON.parse(await pe.getItem(e)??"{}")},set:function(t){return pe.setItem(e,JSON.stringify(t))}}},$e=function(e){let t=c.Platform.select({default:function(r){return r},ios:function(r){return ge.saveFileToGallery?r:`Documents/${r}`}}),n;return{get:async function(){let r=`${ge.getConstants().DocumentsDirPath}/${e}`;return!n&&!await ge.fileExists(r)?(n=!0,ge.writeFile("documents",t(e),"{}","utf8")):JSON.parse(await ge.readFile(r,"utf8"))},set:async function(r){return void await ge.writeFile("documents",t(e),JSON.stringify(r),"utf8")}}}});var It={};S(It,{awaitSyncWrapper:()=>Ne,createFileBackend:()=>$e,createMMKVBackend:()=>ce,createProxy:()=>tr,createStorage:()=>Q,useProxy:()=>x,wrapSync:()=>le});function tr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Ct();function n(r,o){return new Proxy(r,{get(i,a){if(a===Qn)return t;let u=[...o,a],d=i[a];return d!=null?(t.emit("GET",{path:u,value:d}),typeof d=="object"?n(d,u):d):d},set(i,a,u){return i[a]=u,t.emit("SET",{path:[...o,a],value:u}),!0},deleteProperty(i,a){let u=delete i[a];return u&&t.emit("DEL",{path:[...o,a]}),u}})}return{proxy:n(e,[]),emitter:t}}function x(e){let t=e[Qn],[,n]=React.useReducer(function(r){return~r},0);return React.useEffect(function(){let r=function(){return n()};return t.on("SET",r),t.on("DEL",r),function(){t.off("SET",r),t.off("DEL",r)}},[]),e}async function Q(e){let t=await e.get(),{proxy:n,emitter:r}=tr(t),o=function(){return e.set(n)};return r.on("SET",o),r.on("DEL",o),n}function le(e){let t,n=[],r=function(o){return t?o():n.push(o)};return e.then(function(o){t=o,n.forEach(function(i){return i()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(o){return[o,function(i){for(var a=arguments.length,u=new Array(a>1?a-1:0),d=1;d<a;d++)u[d-1]=arguments[d];return Reflect[o](t??i,...u)}]})),get(o,i,a){return i===er?r:Reflect.get(t??o,i,a)}})}var Qn,er,Ne,F=s(()=>{"use strict";Zn();qn();Qn=Symbol.for("vendetta.storage.emitter"),er=Symbol.for("vendetta.storage.accessor");Ne=function(e){return new Promise(function(t){return e[er](t)})}});var Nt,ko,v,Re=s(()=>{"use strict";_();Nt=f("setLogFn").default,ko=new Nt("Vendetta"),v=ko});var Lt={};S(Lt,{color:()=>ue,fetchTheme:()=>je,getCurrentTheme:()=>xe,initThemes:()=>Mt,installTheme:()=>Ee,patchChatBackground:()=>Pt,removeTheme:()=>Bt,selectTheme:()=>_e,themes:()=>D,updateThemes:()=>rr});async function Dt(e){if(typeof e!="object")throw new Error("Theme must be an object");await $e("vendetta_theme.json").set(e)}function Pt(){let e=xe()?.data?.background;if(!e)return;let t=N("MessagesWrapperConnected",!1);if(!t)return;let{MessagesWrapper:n}=f("MessagesWrapper");if(!n)return;let r=[R("default",t,function(o,i){return React.createElement(c.ImageBackground,{style:{flex:1,height:"100%"},source:{uri:e.url},blurRadius:typeof e.blur=="number"?e.blur:0,children:i})}),R("render",n.prototype,function(o,i){let a=q(i,function(u){return"HACK_fixModalInteraction"in u?.props&&u?.props?.style});a?a.props.style=Object.assign(c.StyleSheet.flatten(a.props.style??{}),{backgroundColor:"#0000"}):v.error("Didn't find Messages when patching MessagesWrapper!")})];return function(){return r.forEach(function(o){return o()})}}function nr(e){if(ee.valid(e))return ee(e).hex();let t=Number(c.processColor(e));return ee.rgb(t>>16&255,t>>8&255,t&255,t>>24&255).hex()}function Uo(e){if(e.semanticColors){let t=e.semanticColors;for(let n in t)for(let r in t[n])t[n][r]&&=nr(t[n][r])}if(e.rawColors){let t=e.rawColors;for(let n in t)e.rawColors[n]=nr(t[n]);c.Platform.OS==="android"&&Go(t)}return e}function Go(e){let t={BLACK_ALPHA_60:["BLACK",.6],BRAND_NEW_360_ALPHA_20:["BRAND_360",.2],BRAND_NEW_360_ALPHA_25:["BRAND_360",.25],BRAND_NEW_500_ALPHA_20:["BRAND_500",.2],PRIMARY_DARK_500_ALPHA_20:["PRIMARY_500",.2],PRIMARY_DARK_700_ALPHA_60:["PRIMARY_700",.6],STATUS_GREEN_500_ALPHA_20:["GREEN_500",.2],STATUS_RED_500_ALPHA_20:["RED_500",.2]};for(let n in t){let[r,o]=t[n];e[r]&&(e[n]=ee(e[r]).alpha(o).hex())}}async function je(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;try{n=await(await se(e,{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch theme at ${e}`)}D[e]={id:e,selected:t,data:Uo(n)},t&&Dt(D[e])}async function Ee(e){if(typeof e!="string"||e in D)throw new Error("Theme already installed");await je(e)}async function _e(e){if(e==="default")return await Dt({});let t=Object.values(D).find(function(n){return n.selected})?.id;t&&(D[t].selected=!1),D[e].selected=!0,await Dt(D[e])}async function Bt(e){let t=D[e];return t.selected&&await _e("default"),delete D[e],t.selected}function xe(){let e=window.__vendetta_loader?.features?.themes?.prop;return e&&window[e]||null}async function rr(){await Ne(D);let e=xe();await Promise.allSettled(Object.keys(D).map(function(t){return je(t,e?.id===t)}))}async function Mt(){let e=xe();if(!e)return;let t=ue.default.unsafe_rawColors;ue.default.unsafe_rawColors=new Proxy(t,{get:function(n,r){return e?e.data?.rawColors?.[r]??Reflect.get(t,r):Reflect.get(t,r)}}),ye("resolveSemanticColor",ue.default.meta,function(n,r){if(!e)return r(...n);let[o,i]=n,[a,u]=or(o,i),d=o==="amoled"?2:o==="light"?1:0;let g=Vo[a]??a,P=(e.data?.semanticColors?.[a]??e.data?.semanticColors?.[g])?.[d];if(a==="CHAT_BACKGROUND"&&typeof e.data?.background?.alpha=="number")return ee(P||"black").alpha(1-e.data.background.alpha).hex();if(P)return P;let O=e.data?.rawColors?.[u.raw];return O?u.opacity===1?O:ee(O).alpha(u.opacity).hex():r(...n)}),await rr()}function or(e,t){let n=t[or._sym??=Object.getOwnPropertySymbols(t)[0]],r=ue.SemanticColor[n];return[n,r[e.toLowerCase()]]}var ue,D,Vo,G=s(()=>{"use strict";h();ie();_();z();F();Re();ue=f("SemanticColor"),D=le(Q(ce("VENDETTA_THEMES"))),Vo={BG_BACKDROP:"BACKGROUND_FLOATING",BG_BASE_PRIMARY:"BACKGROUND_PRIMARY",BG_BASE_SECONDARY:"BACKGROUND_SECONDARY",BG_BASE_TERTIARY:"BACKGROUND_SECONDARY_ALT",BG_MOD_FAINT:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_STRONG:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_SUBTLE:"BACKGROUND_MODIFIER_ACCENT",BG_SURFACE_OVERLAY:"BACKGROUND_FLOATING",BG_SURFACE_OVERLAY_TMP:"BACKGROUND_FLOATING",BG_SURFACE_RAISED:"BACKGROUND_MOBILE_PRIMARY"}});var ct,ar,c,ee,Ot=s(()=>{"use strict";G();st();ct=function(e){for(let t in window.modules){let n=window.modules[t]?.publicModule.exports;if(n&&e(n))return n}},ar=ct(function(e){return e?.default?.name==="requireNativeComponent"});ar&&ye("default",ar,function(e,t){try{return t(...e)}catch{return function(){return null}}});window.React=ct(function(e){return e.createElement});c=ct(function(e){return e.AppRegistry}),ee=ct(function(e){return e.brewer});if(window.__vendetta_loader?.features.themes)try{Mt()}catch(e){console.error("[Vendetta] Failed to initialize themes...",e)}});var Gt={};S(Gt,{Flux:()=>Ko,FluxDispatcher:()=>ft,NavigationNative:()=>te,React:()=>we,ReactNative:()=>c,assets:()=>Ke,channels:()=>Ft,chroma:()=>ee,clipboard:()=>H,commands:()=>ut,constants:()=>De,i18n:()=>lt,invites:()=>Ho,lodash:()=>Ut,moment:()=>Vt,navigation:()=>$o,navigationStack:()=>jo,stylesheet:()=>C,toasts:()=>kt,url:()=>Pe});var De,Ft,lt,Pe,kt,C,H,Ke,Ho,ut,$o,jo,te,Ko,ft,we,Vt,Ut,h=s(()=>{"use strict";_();Ot();Ot();De=f("Fonts","Permissions"),Ft=f("getVoiceChannelId"),lt=f("Messages"),Pe=f("openURL","openDeeplink"),kt=ae(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop}),C=f("createThemedStyleSheet"),H=f("setString","getString","hasString"),Ke=f("registerAsset"),Ho=f("acceptInviteAndTransitionToInviteChannel"),ut=f("getBuiltInCommands"),$o=f("pushLazy"),jo=f("createStackNavigator"),te=f("NavigationContainer"),Ko=f("connectStores"),ft=f("_currentDispatchActionType"),we=window.React,Vt=f("isMoment"),Ut=f("forEachRight")});var $t={};S($t,{all:()=>ne,find:()=>Wo,getAssetByID:()=>Yo,getAssetByName:()=>zo,getAssetIDByName:()=>l,patchAssets:()=>Ht});function Ht(){let e=R("registerAsset",Ke,function(t,n){let r=t[0];ne[r.name]={...r,id:n}});for(let t=1;;t++){let n=Ke.getAssetByID(t);if(!n)break;ne[n.name]||(ne[n.name]={...n,id:t})}return e}var ne,Wo,zo,Yo,l,E=s(()=>{"use strict";h();z();ne={};Wo=function(e){return Object.values(ne).find(e)},zo=function(e){return ne[e]},Yo=function(e){return Ke.getAssetByID(e)},l=function(e){return ne[e]?.id}});var jt={};S(jt,{showToast:()=>p});var Xo,p,Y=s(()=>{"use strict";_();h();({uuid4:Xo}=f("uuid4")),p=function(e,t){return kt.open({key:`vd-toast-${Xo()}`,content:e,source:t,icon:t})}});var m,$,B=s(()=>{"use strict";F();m=le(Q(ce("VENDETTA_SETTINGS"))),$=le(Q($e("vendetta_loader.json")))});var Yt={};S(Yt,{connectToDebugger:()=>Kt,getDebugInfo:()=>zt,patchLogHook:()=>Wt,socket:()=>k,toggleSafeMode:()=>We,versionHash:()=>mt});async function We(){m.safeMode={...m.safeMode,enabled:!m.safeMode?.enabled},window.__vendetta_loader?.features.themes&&(xe()?.id&&(m.safeMode.currentThemeId=xe().id),m.safeMode?.enabled?await _e("default"):m.safeMode?.currentThemeId&&await _e(m.safeMode?.currentThemeId)),setTimeout(he.reload,400)}function Kt(e){if(k!==void 0&&k.readyState!==WebSocket.CLOSED&&k.close(),!e){p("Invalid debugger URL!",l("Small"));return}k=new WebSocket(`ws://${e}`),k.addEventListener("open",function(){return p("Connected to debugger.",l("Check"))}),k.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(n){console.error(n)}}),k.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),p("An error occurred with the debugger connection!",l("Small"))})}function Wt(){let e=R("nativeLoggingHook",globalThis,function(t){k?.readyState===WebSocket.OPEN&&k.send(JSON.stringify({message:t[0],level:t[1]})),v.log(t[0])});return function(){k&&k.close(),e()}}function zt(){let e=window.HermesInternal.getRuntimeProperties(),t=e["OSS Release Version"],n="for RN ",r=c.Platform.constants,o=r.reactNativeVersion;return{vendetta:{version:mt,loader:window.__vendetta_loader?.name??"Unknown"},discord:{version:Ge.Version,build:Ge.Build},react:{version:React.version,nativeVersion:t.startsWith(n)?t.substring(n.length):`${o.major}.${o.minor}.${o.patch}`},hermes:{version:t,buildType:e.Build,bytecodeVersion:e["Bytecode Version"]},...c.Platform.select({android:{os:{name:"Android",version:r.Release,sdk:r.Version}},ios:{os:{name:r.systemName,version:r.osVersion}}}),...c.Platform.select({android:{device:{manufacturer:r.Manufacturer,brand:r.Brand,model:r.Model,codename:J.device}},ios:{device:{manufacturer:J.deviceManufacturer,brand:J.deviceBrand,model:J.deviceModel,codename:J.device}}})}}var k,mt,Be=s(()=>{"use strict";h();z();G();Z();E();Y();B();Re();mt="b90cddd"});var M,ir,sr,ze,Me=s(()=>{(function(e){e.BRAND="brand",e.RED="red",e.GREEN="green",e.PRIMARY="primary",e.TRANSPARENT="transparent",e.GREY="grey",e.LIGHTGREY="lightgrey",e.WHITE="white",e.LINK="link"})(M||(M={}));(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(ir||(ir={}));(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(sr||(sr={}));(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(ze||(ze={}))});var Jt={};S(Jt,{patchCommands:()=>Xt,registerCommand:()=>Jo});function Xt(){let e=R("getBuiltInCommands",ut,function(t,n){let[r]=t;if(r===ze.CHAT)return n.concat(Ye)});return function(){Ye=[],e()}}function Jo(e){let t=ut.getBuiltInCommands(ze.CHAT,!0,!1);t.sort(function(r,o){return parseInt(o.id)-parseInt(r.id)});let n=t[t.length-1];return e.id=(parseInt(n.id,10)-1).toString(),Ye.push(e),function(){return Ye=Ye.filter(function(r){let{id:o}=r;return o!==e.id})}}var Ye,Zt=s(()=>{"use strict";Me();h();z();Ye=[]});var tn={};S(tn,{evalPlugin:()=>cr,fetchPlugin:()=>Le,getSettings:()=>en,initPlugins:()=>Qt,installPlugin:()=>fe,plugins:()=>T,removePlugin:()=>qt,startPlugin:()=>Oe,stopPlugin:()=>Fe});async function Le(e){e.endsWith("/")||(e+="/");let t=T[e],n;try{n=await(await se(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}let r;if(t?.manifest.hash!==n.hash)try{r=await(await se(e+(n.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!r&&!t)throw new Error(`Failed to fetch JS for ${e}`);T[e]={id:e,manifest:n,enabled:t?.enabled??!1,update:t?.update??!0,js:r??t.js}}async function fe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in T)throw new Error("Plugin already installed");await Le(e),t&&await Oe(e)}async function cr(e){let t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await Q(ce(e.id))},logger:new Nt(`Vendetta \xBB ${e.manifest.name}`)},n=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,r=(0,eval)(n)(t),o=typeof r=="function"?r():r;return o?.default??o??{}}async function Oe(e){e.endsWith("/")||(e+="/");let t=T[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{if(!m.safeMode?.enabled){let n=await cr(t);be[e]=n,n.onLoad?.()}t.enabled=!0}catch(n){v.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,n);try{be[t.id]?.onUnload?.()}catch(r){v.error(`Plugin ${t.id} errored whilst unloading`,r)}delete be[e],t.enabled=!1}}function Fe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.endsWith("/")||(e+="/");let n=T[e],r=be[e];if(!n)throw new Error("Attempted to stop non-existent plugin");if(!m.safeMode?.enabled){try{r?.onUnload?.()}catch(o){v.error(`Plugin ${n.id} errored whilst unloading`,o)}delete be[e]}t&&(n.enabled=!1)}function qt(e){e.endsWith("/")||(e+="/"),T[e].enabled&&Fe(e),pe.removeItem(e),delete T[e]}async function Qt(){await Ne(m),await Ne(T);let e=Object.keys(T);return m.safeMode?.enabled||(await Promise.allSettled(e.filter(function(t){return T[t].enabled}).map(async function(t){return T[t].update&&await Le(t).catch(function(n){return v.error(n.message)}),await Oe(t)})),e.filter(function(t){return!T[t].enabled&&T[t].update}).forEach(function(t){return Le(t)})),Zo}var T,be,Zo,en,me=s(()=>{"use strict";ie();F();Z();Re();B();T=le(Q(ce("VENDETTA_PLUGINS"))),be={};Zo=function(){return Object.keys(be).forEach(function(e){return Fe(e,!1)})},en=function(e){return be[e]?.settings}});var sn={};S(sn,{DISCORD_SERVER:()=>nn,DISCORD_SERVER_ID:()=>rn,GITHUB:()=>an,HTTP_REGEX:()=>qo,HTTP_REGEX_MULTI:()=>Je,PLUGINS_CHANNEL_ID:()=>on,PROXY_PREFIX:()=>Se,THEMES_CHANNEL_ID:()=>Xe});var nn,rn,on,Xe,an,Se,qo,Je,ve=s(()=>{"use strict";nn="https://discord.gg/n9QQ4XhhJP",rn="1015931589865246730",on="1091880384561684561",Xe="1091880434939482202",an="https://github.com/vendetta-mod",Se="https://vd-plugins.github.io/proxy",qo=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,Je=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g});function ke(e){let{label:t,icon:n,noPadding:r=!1,noAnimation:o=!1,children:i}=e,{FormRow:a,FormDivider:u}=y,[d,g]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(a,{label:t,leading:n&&React.createElement(a.Icon,{source:l(n)}),trailing:React.createElement(a.Arrow,{style:{transform:[{rotate:`${d?180:90}deg`}]}}),onPress:function(){g(!d),o||c.LayoutAnimation.configureNext(c.LayoutAnimation.Presets.easeInEaseOut)}}),!d&&React.createElement(React.Fragment,null,React.createElement(u,null),React.createElement(c.View,{style:!r&&{paddingHorizontal:15}},i)))}var lr=s(()=>{"use strict";h();E();A()});function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var fr=s(()=>{});function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dr(e,t,n){return t&&mr(e.prototype,t),n&&mr(e,n),e}var pr=s(()=>{});function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hr=s(()=>{});function dt(e,t){return dt=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},dt(e,t)}var yr=s(()=>{});function Rr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}var Er=s(()=>{yr()});function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ze(e)}var _r=s(()=>{});function xr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var wr=s(()=>{});function br(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Sr=s(()=>{});function vr(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var Tr=s(()=>{});function Ar(e,t){return t&&(vr(t)==="object"||typeof t=="function")?t:br(e)}var Cr=s(()=>{Sr();Tr()});function Ir(e){var t=xr();return function(){var r=Ze(e),o;if(t){var i=Ze(this).constructor;o=Reflect.construct(r,arguments,i)}else o=r.apply(this,arguments);return Ar(this,o)}}var Nr=s(()=>{_r();wr();Cr()});var Dr,Qo,w,cn=s(()=>{"use strict";fr();pr();hr();Er();Nr();h();A();Dr=C.createThemedStyleSheet({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5}}),w=function(e){"use strict";Rr(n,e);var t=Ir(n);function n(r){ur(this,n);var o;return o=t.call(this,r),o.state={hasErr:!1},o}return dr(n,[{key:"render",value:function(){var o=this;return this.state.hasErr?we.createElement(c.ScrollView,{style:Dr.view},we.createElement(y.FormText,{style:Dr.title},"Uh oh."),we.createElement(Te,{selectable:!0,style:{marginBottom:5}},this.state.errText),we.createElement(X,{color:X.Colors.RED,size:X.Sizes.MEDIUM,look:X.Looks.FILLED,onPress:function(){return o.setState({hasErr:!1,errText:void 0})},text:"Retry"})):this.props.children}}]),n}(Qo=we.Component);gr(w,"getDerivedStateFromError",function(e){return{hasErr:!0,errText:e.message}})});var ln={};S(ln,{rawColors:()=>ea,semanticColors:()=>b});var b,ea,Ae=s(()=>{"use strict";h();G();b=ue?.default?.colors??De?.ThemeColorMap,ea=ue?.default?.unsafe_rawColors??De?.Colors});function Te(e){let{selectable:t,style:n,children:r}=e;return t?c.Platform.select({ios:React.createElement(ta,{style:n,children:r}),default:React.createElement(Pr,{style:n,children:r,selectable:!0})}):React.createElement(Pr,{style:n,children:r})}var Br,ta,Pr,Mr=s(()=>{"use strict";h();Ae();Br=C.createThemedStyleSheet({codeBlock:{fontFamily:De.Fonts.CODE_SEMIBOLD,fontSize:12,textAlignVertical:"center",backgroundColor:b.BACKGROUND_SECONDARY,color:b.TEXT_NORMAL,borderWidth:1,borderRadius:4,borderColor:b.BACKGROUND_TERTIARY,padding:10}}),ta=function(e){let{style:t,children:n}=e;return React.createElement(c.TextInput,{editable:!1,multiline:!0,style:[Br.codeBlock,t&&t],value:n})},Pr=function(e){let{selectable:t,style:n,children:r}=e;return React.createElement(c.Text,{selectable:t,style:[Br.codeBlock,n&&n]},r)}});function Ve(e){let{onChangeText:t,placeholder:n,style:r}=e;return React.createElement(na,{style:[ra.search,r],placeholder:n,onChangeText:t})}var na,ra,Lr=s(()=>{"use strict";h();_();na=N("StaticSearchBarContainer"),ra=C.createThemedStyleSheet({search:{margin:0,padding:0,borderBottomWidth:0,background:"none",backgroundColor:"none"}})});var dn={};S(dn,{Alert:()=>un,Button:()=>X,Codeblock:()=>Te,ErrorBoundary:()=>w,Forms:()=>y,General:()=>oa,HelpMessage:()=>fn,SafeAreaView:()=>mn,Search:()=>Ve,Summary:()=>ke});var y,oa,un,X,fn,mn,A=s(()=>{"use strict";_();lr();cn();Mr();Lr();y=f("Form","FormSection"),oa=f("Button","Text","View"),un=Rt("FluxContainer(Alert)"),X=f("Looks","Colors","Sizes"),fn=N("HelpMessage"),mn=f("useSafeAreaInsets").SafeAreaView});function Or(){return R("default",aa,function(e,t){let[{thread:n}]=e;if(n.guild_id!==rn)return;let r;if(n.parent_id===on)r="Plugin";else if(n.parent_id===Xe&&window.__vendetta_loader?.features.themes)r="Theme";else return;let{firstMessage:o}=ca(n),i=o?.content?.match(Je);if(!i)return;r==="Plugin"?i=i.filter(function(g){return g.startsWith(Se)}):i=i.filter(function(g){return g.endsWith(".json")});let a=i[0];if(!a)return;let u=q(t,function(g){return g.props?.bottom===!0}).props.children.props.children[1],d=u[0].type;u.unshift(React.createElement(d,{key:"install"},React.createElement(ia,{leading:React.createElement(sa,{style:{opacity:1},source:l("ic_download_24px")}),label:`Install ${r}`,onPress:function(){return(r==="Plugin"?fe:Ee)(a).then(function(){p(`Successfully installed ${n.name}`,l("Check"))}).catch(function(g){p(g.message,l("Small"))}).finally(function(){return la()})}})))})}var aa,ia,sa,ca,la,Fr=s(()=>{"use strict";_();ve();z();me();G();ie();E();Y();A();aa=N("ForumPostLongPressActionSheet",!1),{FormRow:ia,FormIcon:sa}=y,{useFirstForumPostMessage:ca}=f("useFirstForumPostMessage"),{hideActionSheet:la}=f("openLazy","hideActionSheet")});function pn(e){let{title:t,confirmText:n,confirmColor:r,onConfirm:o,cancelText:i,placeholder:a,initialValue:u=""}=e,[d,g]=React.useState(u),[P,O]=React.useState("");function re(){Promise.resolve(o(d)).then(function(){kr.close()}).catch(function(de){O(de.message)})}return React.createElement(un,{title:t,confirmText:n,confirmColor:r,isConfirmButtonDisabled:P.length!==0,onConfirm:re,cancelText:i,onCancel:function(){return kr.close()}},React.createElement(ua,{placeholder:a,value:d,onChangeText:function(V){g(V),P&&O("")},returnKeyType:"done",onSubmitEditing:re,error:P,autoFocus:!0,showBorder:!0,style:{paddingVertical:5,alignSelf:"stretch",paddingHorizontal:0}}))}var ua,kr,Vr=s(()=>{"use strict";_();A();({FormInput:ua}=y),kr=f("openLazy","close")});var hn={};S(hn,{showConfirmationAlert:()=>j,showCustomAlert:()=>Gr,showInputAlert:()=>gn});function j(e){let t=e;return t.body=e.content,delete t.content,t.isDismissable??=!0,Ur.show(t)}var Ur,Gr,gn,Ce=s(()=>{"use strict";_();Vr();Ur=f("openLazy","close");Gr=function(e,t){return Ur.openLazy({importer:async function(){return function(){return React.createElement(e,t)}}})},gn=function(e){return Gr(pn,e)}});function Hr(e){return e.startsWith(Se)?"Plugin":e.endsWith(".json")&&window.__vendetta_loader?.features.themes?"Theme":void 0}function $r(e,t){(e==="Plugin"?fe:Ee)(t).then(function(){p("Successfully installed",l("Check"))}).catch(function(n){p(n.message,l("Small"))})}function jr(){let e=new Array;return e.push(R("showSimpleActionSheet",fa,function(t){if(t[0].key!=="LongPressUrl")return;let{header:{title:n},options:r}=t[0],o=Hr(n);o&&r.push({label:`Install ${o}`,onPress:function(){return $r(o,n)}})})),e.push(ye("handleClick",ma,async function(t,n){let{href:r}=t[0],o=Hr(r);if(!o)return n.apply(this,t);if(o==="Theme"&&ga(pa())?.parent_id!==Xe)return n.apply(this,t);j({title:"Hold Up",content:["This link is a ",React.createElement(c.Text,{style:ha["text-md/semibold"]},o),", would you like to install it?"],onConfirm:function(){return $r(o,r)},confirmText:"Install",cancelText:"Cancel",secondaryConfirmText:"Open in Browser",onConfirmSecondary:function(){return da(r)}})})),function(){return e.forEach(function(t){return t()})}}var fa,ma,da,pa,ga,ha,Kr=s(()=>{"use strict";_();h();ve();z();me();G();Ce();E();Y();fa=f("showSimpleActionSheet"),ma=f("handleClick"),{openURL:da}=Pe,{getChannelId:pa}=Ft,{getChannel:ga}=f("getChannel"),{TextStyleSheet:ha}=f("TextStyleSheet")});function yn(){let e=new Array;return e.push(Or()),e.push(jr()),function(){return e.forEach(function(t){return t()})}}var Wr=s(()=>{"use strict";Fr();Kr()});function Xr(){return R("render",ya.prototype,function(e,t){var n=this;if(!this.state.error)return;this.state.activeTab??="message";let r=Yr.find(function(a){return a.id===n.state.activeTab}),o=this.state.error[this.state.activeTab],i=[{text:"Restart Discord",onPress:this.handleReload},...m.safeMode?.enabled?[]:[{text:"Restart in Safe Mode",onPress:We}],{text:"Retry Render",color:M.RED,onPress:function(){return n.setState({info:null,error:null})}}];return React.createElement(w,null,React.createElement(mn,{style:qe.container},React.createElement(c.View,{style:qe.header},React.createElement(c.Image,{style:{flex:1,resizeMode:"contain",maxHeight:96,paddingRight:4},source:Ea.theme==="light"?t.props.lightSource:t.props.darkSource}),React.createElement(c.View,{style:{flex:2,paddingLeft:4}},React.createElement(c.Text,{style:qe.headerTitle},t.props.title),React.createElement(c.Text,{style:qe.headerDescription},t.props.body))),React.createElement(c.View,{style:{flex:6}},React.createElement(c.View,{style:{paddingBottom:8}},React.createElement(Ra,{tabs:Yr,activeTab:this.state.activeTab,onTabSelected:function(a){n.setState({activeTab:a})}})),React.createElement(Te,{selectable:!0,style:{flex:1,textAlignVertical:"top"}},r?.trimWhitespace?o.split(`
`).filter(function(a){return a.length!==0}).map(function(a){return a.trim()}).join(`
`):o)),React.createElement(c.View,{style:qe.footer},i.map(function(a){let u=i.indexOf(a)!==0?8:0;return React.createElement(X,{text:a.text,color:a.color??M.BRAND,size:a.size??"small",onPress:a.onPress,style:J.isTablet?{flex:`0.${i.length}`,marginLeft:u}:{marginTop:u}})}))))})}var ya,Ra,Ea,zr,qe,Yr,Jr=s(()=>{"use strict";Me();h();_();z();Be();Z();Ae();A();B();ya=N("ErrorBoundary"),{BadgableTabBar:Ra}=f("BadgableTabBar"),Ea=Ie("ThemeStore"),{TextStyleSheet:zr}=f("TextStyleSheet"),qe=C.createThemedStyleSheet({container:{flex:1,backgroundColor:b.BACKGROUND_PRIMARY,paddingHorizontal:16},header:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:8},headerTitle:{...zr["heading-md/semibold"],textAlign:"center",textTransform:"uppercase",color:b.HEADER_PRIMARY},headerDescription:{...zr["text-sm/medium"],textAlign:"center",color:b.TEXT_MUTED},footer:{flexDirection:J.isTablet?"row":"column",justifyContent:"flex-end",marginVertical:8}}),Yr=[{id:"message",title:"Message"},{id:"stack",title:"Stack Trace"},{id:"componentStack",title:"Component",trimWhitespace:!0}]});function pt(e){let{alertTitle:t,installFunction:n}=e;return React.createElement(c.TouchableOpacity,{onPress:function(){return H.getString().then(function(r){return gn({title:t,initialValue:r.match(Je)?.[0]??"",placeholder:"https://example.com/",onConfirm:function(o){return n(o)},confirmText:"Install",cancelText:"Cancel"})})}},React.createElement(c.Image,{style:_a.icon,source:l("ic_add_24px")}))}var _a,Zr=s(()=>{"use strict";h();ve();Ce();E();Ae();_a=C.createThemedStyleSheet({icon:{marginRight:10,tintColor:b.HEADER_PRIMARY}})});function gt(e){let{label:t,version:n,icon:r}=e;return React.createElement(qr,{label:t,leading:React.createElement(qr.Icon,{source:l(r)}),trailing:React.createElement(xa,null,n),onPress:function(){H.setString(`${t} - ${n}`),p("Copied version to clipboard.",l("toast_copy_link"))}})}var qr,xa,Qr=s(()=>{"use strict";h();E();Y();A();({FormRow:qr,FormText:xa}=y)});function En(){x(m);let e=[{label:"Vendetta",version:I.vendetta.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${I.discord.version} (${I.discord.build})`,icon:"Discord"},{label:"React",version:I.react.version,icon:"ic_category_16px"},{label:"React Native",version:I.react.nativeVersion,icon:"mobile"},{label:"Bytecode",version:I.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],t=[{label:"Loader",version:I.vendetta.loader,icon:"ic_download_24px"},{label:"Operating System",version:`${I.os.name} ${I.os.version}`,icon:"ic_cog_24px"},...I.os.sdk?[{label:"SDK",version:I.os.sdk,icon:"ic_profile_badge_verified_developer_color"}]:[],{label:"Manufacturer",version:I.device.manufacturer,icon:"ic_badge_staff"},{label:"Brand",version:I.device.brand,icon:"ic_settings_boost_24px"},{label:"Model",version:I.device.model,icon:"ic_phonelink_24px"},{label:c.Platform.select({android:"Codename",ios:"Machine ID"}),version:I.device.codename,icon:"ic_compose_24px"}];return React.createElement(w,null,React.createElement(c.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(Rn,{title:"Links",titleStyleType:"no_border"},React.createElement(K,{label:"Discord Server",leading:React.createElement(K.Icon,{source:l("Discord")}),trailing:K.Arrow,onPress:function(){return Pe.openDeeplink(nn)}}),React.createElement(Ue,null),React.createElement(K,{label:"GitHub",leading:React.createElement(K.Icon,{source:l("img_account_sync_github_white")}),trailing:K.Arrow,onPress:function(){return Pe.openURL(an)}})),React.createElement(Rn,{title:"Actions"},React.createElement(K,{label:"Reload Discord",leading:React.createElement(K.Icon,{source:l("ic_message_retry")}),onPress:function(){return he.reload()}}),React.createElement(Ue,null),React.createElement(K,{label:m.safeMode?.enabled?"Return to Normal Mode":"Reload in Safe Mode",subLabel:`This will reload Discord ${m.safeMode?.enabled?"normally.":"without loading plugins."}`,leading:React.createElement(K.Icon,{source:l("ic_privacy_24px")}),onPress:We}),React.createElement(Ue,null),React.createElement(wa,{label:"Developer Settings",leading:React.createElement(K.Icon,{source:l("ic_progress_wrench_24px")}),value:m.developerSettings,onValueChange:function(n){m.developerSettings=n}})),React.createElement(Rn,{title:"Info"},React.createElement(ke,{label:"Versions",icon:"ic_information_filled_24px"},e.map(function(n,r){return React.createElement(React.Fragment,null,React.createElement(gt,{label:n.label,version:n.version,icon:n.icon}),r!==e.length-1&&React.createElement(Ue,null))})),React.createElement(Ue,null),React.createElement(ke,{label:"Platform",icon:"ic_mobile_device"},t.map(function(n,r){return React.createElement(React.Fragment,null,React.createElement(gt,{label:n.label,version:n.version,icon:n.icon}),r!==t.length-1&&React.createElement(Ue,null))})))))}var K,wa,Rn,Ue,I,eo=s(()=>{"use strict";h();ve();Be();F();Z();E();A();B();Qr();({FormRow:K,FormSwitchRow:wa,FormSection:Rn,FormDivider:Ue}=y),I=zt()});function Qe(e){let{items:t,safeModeMessage:n,safeModeExtras:r,card:o}=e;x(m),x(t);let[i,a]=React.useState("");return React.createElement(w,null,React.createElement(c.FlatList,{ListHeaderComponent:React.createElement(React.Fragment,null,m.safeMode?.enabled&&React.createElement(c.View,{style:{marginBottom:10}},React.createElement(fn,{messageType:0},n),r),React.createElement(Ve,{style:{marginBottom:10},onChangeText:function(u){return a(u.toLowerCase())},placeholder:"Search"})),style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:20},data:Object.values(t).filter(function(u){return u.id?.toLowerCase().includes(i)}),renderItem:function(u){let{item:d,index:g}=u;return React.createElement(o,{item:d,index:g})}}))}var _n=s(()=>{"use strict";h();F();A();B()});function tt(e){let t=e.toggleValue??!1;return React.createElement(c.View,{style:[et.card,{marginTop:e.index!==0?10:0}]},React.createElement(ht,{style:et.header,label:e.headerLabel,leading:e.headerIcon&&React.createElement(ht.Icon,{source:l(e.headerIcon)}),trailing:e.toggleType&&(e.toggleType==="switch"?React.createElement(ba,{style:c.Platform.OS==="android"&&{marginVertical:-15},value:e.toggleValue,onValueChange:e.onToggleChange}):React.createElement(c.Pressable,{onPress:function(){t=!t,e.onToggleChange?.(t)}},React.createElement(Sa,{selected:e.toggleValue})))}),React.createElement(ht,{label:e.descriptionLabel,trailing:React.createElement(c.View,{style:et.actions},e.overflowActions&&React.createElement(c.TouchableOpacity,{onPress:function(){return Ta({key:"CardOverflow",header:{title:e.overflowTitle,icon:e.headerIcon&&React.createElement(ht.Icon,{style:{marginRight:8},source:l(e.headerIcon)}),onClose:function(){return va()}},options:e.overflowActions?.map(function(n){return{...n,icon:l(n.icon)}})})}},React.createElement(c.Image,{style:et.icon,source:l("ic_more_24px")})),e.actions?.map(function(n){let{icon:r,onPress:o}=n;return React.createElement(c.TouchableOpacity,{onPress:o},React.createElement(c.Image,{style:et.icon,source:l(r)}))}))}))}var ht,ba,Sa,va,Ta,et,xn=s(()=>{"use strict";h();_();E();Ae();A();({FormRow:ht,FormSwitch:ba,FormRadio:Sa}=y),{hideActionSheet:va}=f("openLazy","hideActionSheet"),{showSimpleActionSheet:Ta}=f("showSimpleActionSheet"),et=C.createThemedStyleSheet({card:{backgroundColor:b?.BACKGROUND_SECONDARY,borderRadius:5},header:{padding:0,backgroundColor:b?.BACKGROUND_TERTIARY,borderTopLeftRadius:5,borderTopRightRadius:5},actions:{flexDirection:"row-reverse",alignItems:"center"},icon:{width:22,height:22,marginLeft:5,tintColor:b?.INTERACTIVE_NORMAL}})});async function to(e,t){e.enabled&&Fe(e.id,!1),t(),e.enabled&&await Oe(e.id)}function wn(e){let{item:t,index:n}=e,r=en(t.id),o=te.useNavigation(),[i,a]=React.useState(!1);return i?null:React.createElement(tt,{index:n,headerLabel:`${t.manifest.name} by ${t.manifest.authors.map(function(u){return u.name}).join(", ")}`,headerIcon:t.manifest.vendetta?.icon||"ic_application_command_24px",toggleType:"switch",toggleValue:t.enabled,onToggleChange:function(u){try{u?Oe(t.id):Fe(t.id)}catch(d){p(d.message,l("Small"))}},descriptionLabel:t.manifest.description,overflowTitle:t.manifest.name,overflowActions:[{icon:"ic_sync_24px",label:"Refetch",onPress:async function(){to(t,function(){Le(t.id).then(async function(){p("Successfully refetched plugin.",l("toast_image_saved"))}).catch(function(){p("Failed to refetch plugin!",l("Small"))})})}},{icon:"copy",label:"Copy URL",onPress:function(){H.setString(t.id),p("Copied plugin URL to clipboard.",l("toast_copy_link"))}},{icon:"ic_download_24px",label:t.update?"Disable updates":"Enable updates",onPress:function(){t.update=!t.update,p(`${t.update?"Enabled":"Disabled"} updates for ${t.manifest.name}.`,l("toast_image_saved"))}},{icon:"ic_duplicate",label:"Clear data",isDestructive:!0,onPress:function(){return j({title:"Wait!",content:`Are you sure you wish to clear the data of ${t.manifest.name}?`,confirmText:"Clear",cancelText:"Cancel",confirmColor:M.RED,onConfirm:function(){to(t,function(){try{pe.removeItem(t.id),p(`Cleared data for ${t.manifest.name}.`,l("trash"))}catch{p(`Failed to clear data for ${t.manifest.name}!`,l("Small"))}})}})}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return j({title:"Wait!",content:`Are you sure you wish to delete ${t.manifest.name}? This will clear all of the plugin's data.`,confirmText:"Delete",cancelText:"Cancel",confirmColor:M.RED,onConfirm:function(){try{qt(t.id),a(!0)}catch(u){p(u.message,l("Small"))}}})}}],actions:[...r?[{icon:"settings",onPress:function(){return o.push("VendettaCustomPage",{title:t.manifest.name,render:r})}}]:[]]})}var no=s(()=>{"use strict";Me();h();me();Z();E();Y();Ce();xn()});function bn(){return x(m),React.createElement(Qe,{items:T,safeModeMessage:"You are in Safe Mode, so plugins cannot be loaded. Disable any misbehaving plugins, then return to Normal Mode from the General settings page.",card:wn})}var ro=s(()=>{"use strict";F();me();B();_n();no()});async function oo(e,t){await _e(e?t:"default"),he.reload()}function Sn(e){let{item:t,index:n}=e;x(m);let[r,o]=React.useState(!1);if(r)return null;let i=t.data.authors;return React.createElement(tt,{index:n,headerLabel:`${t.data.name} ${i?`by ${i.map(function(a){return a.name}).join(", ")}`:""}`,descriptionLabel:t.data.description??"No description.",toggleType:m.safeMode?.enabled?void 0:"radio",toggleValue:t.selected,onToggleChange:function(a){oo(a,t.id)},overflowTitle:t.data.name,overflowActions:[{icon:"ic_sync_24px",label:"Refetch",onPress:function(){je(t.id,t.selected).then(function(){t.selected?j({title:"Theme refetched",content:"A reload is required to see the changes. Do you want to reload now?",confirmText:"Reload",cancelText:"Cancel",confirmColor:M.RED,onConfirm:function(){return he.reload()}}):p("Successfully refetched theme.",l("toast_image_saved"))}).catch(function(){p("Failed to refetch theme!",l("Small"))})}},{icon:"copy",label:"Copy URL",onPress:function(){H.setString(t.id),p("Copied theme URL to clipboard.",l("toast_copy_link"))}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return j({title:"Wait!",content:`Are you sure you wish to delete ${t.data.name}?`,confirmText:"Delete",cancelText:"Cancel",confirmColor:M.RED,onConfirm:function(){Bt(t.id).then(function(a){o(!0),a&&oo(!1,t.id)}).catch(function(a){p(a.message,l("Small"))})}})}}]})}var ao=s(()=>{"use strict";Me();h();G();F();Z();E();Ce();Y();B();xn()});function vn(){return x(m),React.createElement(Qe,{items:D,safeModeMessage:`You are in Safe Mode, meaning themes have been temporarily disabled.${m.safeMode?.currentThemeId?" If a theme appears to be causing the issue, you can press below to disable it persistently.":""}`,safeModeExtras:m.safeMode?.currentThemeId?React.createElement(X,{text:"Disable Theme",color:M.BRAND,size:"small",onPress:function(){delete m.safeMode?.currentThemeId},style:{marginTop:8}}):void 0,card:Sn})}var io=s(()=>{"use strict";Me();F();G();A();B();_n();ao()});function Tn(e){let{asset:t}=e;return React.createElement(Aa,{label:`${t.name} - ${t.id}`,trailing:React.createElement(c.Image,{source:t.id,style:{width:32,height:32}}),onPress:function(){H.setString(t.name),p("Copied asset name to clipboard.",l("toast_copy_link"))}})}var Aa,so=s(()=>{"use strict";h();Y();E();A();({FormRow:Aa}=y)});function An(){let[e,t]=React.useState("");return React.createElement(w,null,React.createElement(c.View,{style:{flex:1}},React.createElement(Ve,{style:{margin:10},onChangeText:function(n){return t(n)},placeholder:"Search"}),React.createElement(c.FlatList,{data:Object.values(ne).filter(function(n){return n.name.includes(e)||n.id.toString()===e}),renderItem:function(n){let{item:r}=n;return React.createElement(Tn,{asset:r})},ItemSeparatorComponent:Ca,keyExtractor:function(n){return n.name}})))}var Ca,co=s(()=>{"use strict";h();E();A();so();({FormDivider:Ca}=y)});function In(){let e=te.useNavigation();return x(m),x($),React.createElement(w,null,React.createElement(c.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(Cn,{title:"Debug",titleStyleType:"no_border"},React.createElement(uo,{value:m.debuggerUrl,onChange:function(t){return m.debuggerUrl=t},placeholder:"127.0.0.1:9090",title:"DEBUGGER URL"}),React.createElement(nt,null),React.createElement(L,{label:"Connect to debug websocket",leading:React.createElement(L.Icon,{source:l("copy")}),onPress:function(){return Kt(m.debuggerUrl)}}),window.__vendetta_rdc&&React.createElement(React.Fragment,null,React.createElement(nt,null),React.createElement(L,{label:"Connect to React DevTools",leading:React.createElement(L.Icon,{source:l("ic_badge_staff")}),onPress:function(){return window.__vendetta_rdc?.connectToDevTools({host:m.debuggerUrl.split(":")?.[0],resolveRNStyle:c.StyleSheet.flatten})}}))),window.__vendetta_loader?.features.loaderConfig&&React.createElement(Cn,{title:"Loader config"},React.createElement(lo,{label:"Load from custom url",subLabel:"Load Vendetta from a custom endpoint.",leading:React.createElement(L.Icon,{source:l("copy")}),value:$.customLoadUrl.enabled,onValueChange:function(t){$.customLoadUrl.enabled=t}}),React.createElement(nt,null),$.customLoadUrl.enabled&&React.createElement(React.Fragment,null,React.createElement(uo,{value:$.customLoadUrl.url,onChange:function(t){return $.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",title:"VENDETTA URL"}),React.createElement(nt,null)),window.__vendetta_loader.features.devtools&&React.createElement(lo,{label:"Load React DevTools",subLabel:`Version: ${window.__vendetta_loader.features.devtools.version}`,leading:React.createElement(L.Icon,{source:l("ic_badge_staff")}),value:$.loadReactDevTools,onValueChange:function(t){$.loadReactDevTools=t}})),React.createElement(Cn,{title:"Other"},React.createElement(L,{label:"Asset Browser",leading:React.createElement(L.Icon,{source:l("ic_image")}),trailing:L.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"Asset Browser",render:An})}}),React.createElement(nt,null),React.createElement(L,{label:"ErrorBoundary Tools",leading:React.createElement(L.Icon,{source:l("ic_warning_24px")}),trailing:L.Arrow,onPress:function(){return Na({key:"ErrorBoundaryTools",header:{title:"Which ErrorBoundary do you want to trip?",icon:React.createElement(L.Icon,{style:{marginRight:8},source:l("ic_warning_24px")}),onClose:function(){return Ia()}},options:[{label:"Vendetta",onPress:function(){return e.push("VendettaCustomPage",{render:function(){return React.createElement("undefined",null)}})}},{label:"Discord",isDestructive:!0,onPress:function(){return e.push("VendettaCustomPage",{noErrorBoundary:!0})}}]})}}))))}var Cn,L,lo,uo,nt,Ia,Na,fo=s(()=>{"use strict";h();_();Be();F();E();A();B();co();({FormSection:Cn,FormRow:L,FormSwitchRow:lo,FormInput:uo,FormDivider:nt}=y),{hideActionSheet:Ia}=f("openLazy","hideActionSheet"),{showSimpleActionSheet:Na}=f("showSimpleActionSheet")});var _u,rt,Da,mo,po,go,Nn=s(()=>{"use strict";h();me();G();Ce();Ae();Y();ie();E();B();cn();Zr();eo();ro();io();fo();ve();_u=C.createThemedStyleSheet({container:{flex:1,backgroundColor:b.BACKGROUND_MOBILE_PRIMARY}}),rt=function(e,t){return t?Ut.snakeCase(e).toUpperCase():e},Da=function(e,t){return Object.fromEntries(e.map(function(n){return[n.key,typeof t=="function"?t(n):typeof t=="string"?n[t]:t]}))},mo=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return[{key:rt("VendettaSettings",e),title:"General",icon:"settings",render:En},{key:rt("VendettaPlugins",e),title:"Plugins",icon:"debug",options:{headerRight:function(){return React.createElement(pt,{alertTitle:"Install Plugin",installFunction:async function(t){if(!t.startsWith(Se)&&!m.developerSettings)j({title:"Unproxied Plugin",content:"The plugin you are trying to install has not been proxied/verified by Vendetta staff. Are you sure you want to continue?",confirmText:"Install",onConfirm:function(){return fe(t).then(function(){return p("Installed plugin",l("Check"))}).catch(function(n){return p(n.toString(),l("Small"))})},cancelText:"Cancel"});else return await fe(t)}})}},render:bn},{key:rt("VendettaThemes",e),title:"Themes",icon:"ic_theme_24px",shouldRender:function(){return window.__vendetta_loader?.features.hasOwnProperty("themes")??!1},options:{headerRight:function(){return!m.safeMode?.enabled&&React.createElement(pt,{alertTitle:"Install Theme",installFunction:Ee})}},render:vn},{key:rt("VendettaDeveloper",e),title:"Developer",icon:"ic_progress_wrench_24px",shouldRender:function(){return m.developerSettings??!1},render:In},{key:rt("VendettaCustomPage",e),title:"Vendetta Page",shouldRender:function(){return!1},render:function(t){let{render:n,noErrorBoundary:r,...o}=t,i=te.useNavigation();return i.addListener("focus",function(){return i.setOptions(U(o,"render","noErrorBoundary"))}),r?React.createElement(n,null):React.createElement(w,null,React.createElement(n,null))}}]},po=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return mo(e).filter(function(t){return t.shouldRender?.()??!0})},go=function(){return Da(mo(),function(e){return{title:e.title,render:e.render,...e.options}})}});function Pn(){let e=te.useNavigation();x(m);let t=po();return React.createElement(w,null,React.createElement(Pa,{key:"Vendetta",title:`Vendetta${m.safeMode?.enabled?" (Safe Mode)":""}`},t.map(function(n,r){return React.createElement(React.Fragment,null,React.createElement(Dn,{label:n.title,leading:React.createElement(Dn.Icon,{source:l(n.icon)}),trailing:Dn.Arrow,onPress:function(){return e.push(n.key)}}),r!==t.length-1&&React.createElement(Ba,null))})))}var Dn,Pa,Ba,ho=s(()=>{"use strict";h();F();E();Nn();A();B();({FormRow:Dn,FormSection:Pa,FormDivider:Ba}=y)});function Bn(){let e=new Array;return e.push(R("default",Ma,function(t,n){return{...n,...go()}})),R("default",La,function(t,n){let r=q(n.props.children,function(o){return o.type&&o.type.name==="UserSettingsOverview"});e.push(R("renderSupportAndAcknowledgements",r.type.prototype,function(o,i){let{props:{children:a}}=i,u=a.findIndex(function(d){return d?.type?.name==="UploadLogsButton"});u!==-1&&a.splice(u,1)})),e.push(R("render",r.type.prototype,function(o,i){let{props:{children:a}}=i,u=[lt.Messages.BILLING_SETTINGS,lt.Messages.PREMIUM_SETTINGS];a=q(a,function(g){return g.children?.[1].type?.name==="FormSection"}).children;let d=a.findIndex(function(g){return u.includes(g?.props.label)});a.splice(d===-1?4:d,0,React.createElement(Pn,null))}))},!0),function(){return e.forEach(function(t){return t()})}}var Ma,La,yo=s(()=>{"use strict";h();_();z();ie();Nn();ho();Ma=N("getScreens",!1),La=N("UserSettingsOverviewWrapper",!1)});function Mn(){let e=[Bn()];return function(){return e.forEach(function(t){return t?.()})}}var Ro=s(()=>{"use strict";yo()});function _o(e){let{locale:t}=e;try{Oa.overrideTheme(Fa?.theme??"dark"),Eo&&ka.useAMOLEDTheme===2&&Eo.setAMOLEDThemeEnabled(!0)}catch(n){v.error("Failed to fix theme...",n)}try{Vt.locale(t.toLowerCase())}catch(n){v.error("Failed to fix timestamps...",n)}ft.unsubscribe("I18N_LOAD_SUCCESS",_o)}function xo(){return ft.subscribe("I18N_LOAD_SUCCESS",_o)}var Oa,Eo,Fa,ka,wo=s(()=>{"use strict";h();_();Re();Oa=f("updateTheme","overrideTheme"),Eo=f("setAMOLEDThemeEnabled"),Fa=Ie("ThemeStore"),ka=Ie("UnsyncedUserSettingsStore")});async function bo(e){return{patcher:U(Jn,"unpatchAll"),metro:{...Et,common:{...Gt}},constants:sn,utils:wt,debug:U(Yt,"versionHash","patchLogHook","toggleSafeMode"),ui:{components:dn,toasts:jt,alerts:hn,assets:$t,...ln},plugins:U(tn,"initPlugins","evalPlugin"),themes:U(Lt,"initThemes"),commands:U(Jt,"patchCommands"),storage:It,settings:m,loader:{identity:window.__vendetta_loader,config:$},logger:v,version:mt,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}}var So=s(()=>{"use strict";z();Re();B();ve();Be();me();G();Zt();F();_();h();A();Y();Ce();E();Ae();ie()});var vo={};S(vo,{default:()=>Va});async function Va(){let e=await Promise.all([Wt(),Ht(),Xt(),Pt(),xo(),Xr(),Mn(),yn()]);window.vendetta=await bo(e),e.push(await Qt()),v.log("Vendetta is ready!")}var To=s(()=>{"use strict";Be();Zt();me();G();E();Wr();Jr();Ro();wo();Re();So()});Z();console.log("Hello from Vendetta!");Promise.resolve().then(()=>(To(),vo)).then(function(e){return e.default()}).catch(function(e){console.log(e?.stack??e.toString()),alert([`Failed to load Vendetta!
`,`Build Number: ${Ge.Build}`,"Vendetta: b90cddd",e?.stack||e.toString()].join(`
`))});})();
//# sourceURL=Vendetta

(function(s,i,o,f,a,_,p,m){"use strict";const{FormRow:v}=m.Forms,$=o.findByName("Icon");function E(e){return React.createElement(v,{label:"Jump To Reference",leading:React.createElement($,{source:p.getAssetIDByName("ic_link_24px")}),onPress:function(){try{e.openDeeplink(e)}catch(n){i.logger.error("Failed to open deeplink",n)}}})}const{FormRow:F}=m.Forms,P=o.findByName("Icon");function b(e,n){const t=e[0].type;return React.createElement(t,{key:"jumpstartervd"},React.createElement(F,{leading:React.createElement(P,{source:p.getAssetIDByName("ic_link_24px")}),label:"Jump to starter message",onPress:function(){return f.url.openDeeplink(n)}}))}const k=o.findByProps("openLazy","hideActionSheet"),B=o.findByName("ForumPostLongPressActionSheet",!1);let g=[];function h(e,n,t){return`https://discord.com/channels/${e}/${n}/${t}`}var A={onLoad:function(){g=[a.after("default",B,function(e,n){let[{thread:t}]=e;const r=_.findInReactTree(n,function(u){return u.props?.bottom===!0}).props.children.props.children[1],c=h(t.guild_id,t.id,t.id);i.logger.log(`First message url: ${c}`),r.unshift(b(r,c))}),a.before("openLazy",k,function(e){const[n,t,r]=e;t=="MessageLongPressActionSheet"&&n.then(function(c){const u=a.after("default",c,function(N,I){f.React.useEffect(function(){return function(){u()}},[]);const[L,y]=I.props?.children?.props?.children?.props?.children,l=L?.props?.message??r?.message;if(!l||!y||!l.messageReference?.message_id)return;const d=l.messageReference,R=h(d.guild_id,d.channel_id,d.message_id);i.logger.log(`Reference url: ${R}`),y.push(E(R))})})})]},onUnload:function(){g.forEach(function(e){return e?.()})}};return s.default=A,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta,vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.utils,vendetta.ui.assets,vendetta.ui.components);

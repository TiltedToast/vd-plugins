(function(i,r,c,B,n,e,u,l){"use strict";const w=function(s){const t=JSON.parse(JSON.stringify(s));for(const a in t.author)switch(a){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete t.author[a]}return t},{Button:d}=n.findByProps("Button","Stack"),{ScrollView:P}=e.ReactNative;function v(s){let{message:t}=s;const a=e.React.useMemo(function(){return JSON.stringify(w(t),null,4)},[t.id]),o={margin:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(P,{style:{flex:1}},e.React.createElement(d,{text:"Copy Raw Content",style:o,variant:"secondary",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),u.showToast("Copied content to clipboard",c.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(d,{text:"Copy Raw Data",style:o,variant:"secondary",onPress:function(){e.clipboard.setString(a),u.showToast("Copied data to clipboard",c.getAssetIDByName("toast_copy_link"))}}),t.content&&e.React.createElement(l.Codeblock,{selectable:!0,style:o},t.content),e.React.createElement(l.Codeblock,{selectable:!0,style:o},a)))}const f=n.findByProps("openLazy","hideActionSheet"),{ActionSheetRow:p}=n.findByProps("ActionSheetRow"),y=n.findByProps("push","pushLazy","pop"),S=n.findByProps("getRenderCloseButton")?.getRenderCloseButton??n.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,C=n.findByName("Navigator")??n.findByProps("Navigator")?.Navigator,E=r.before("openLazy",f,function(s){let[t,a,o]=s;const R=o?.message;a!=="MessageLongPressActionSheet"||!R||t.then(function(N){const A=r.after("default",N,function(D,k){e.React.useEffect(function(){return function(){A()}},[]);const g=B.findInReactTree(k,function(L){return L?.some?.(function(h){return h?.type?.name==="ButtonRow"||h?.type?.name==="ActionSheetRow"})});if(!g)return;const I=function(){return e.React.createElement(C,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"ViewRaw",headerLeft:S?.(function(){return y.pop()}),render:function(){return e.React.createElement(v,{message:R})}}}})};g.push(e.React.createElement(p,{label:"View Raw",icon:e.React.createElement(p.Icon,{source:c.getAssetIDByName("ChatIcon")}),onPress:function(){f.hideActionSheet(),y.push(I)}}))})})}),b=function(){return E()};return i.onUnload=b,i})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.toasts,vendetta.ui.components);
